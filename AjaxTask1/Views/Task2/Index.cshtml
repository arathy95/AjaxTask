
@{
    ViewBag.Title = "Index";
}

<h2>Ajax DropDown Search</h2>

<table class="table table-bordered">
    <tr>
        <td>Select Registered User: </td>
        <td>
            @Html.DropDownList("result", null, "Select User", htmlAttributes: new { @class = "form-control" })
        </td>
    </tr>


    <tr>
        <td colspan="2">
            <table>
                <tr>
                    <td>ID: </td>
                    <td>
                        <label id="lblid" class="label-info"></label>
                    </td>
                </tr>
                <tr>
                    <td>Name: </td>
                    <td>
                        <label id="lblname" class="label-info"></label>
                    </td>
                </tr>
                <tr>
                    <td>Address: </td>
                    <td>
                        <label id="lbladdress" class="label-info"></label>
                    </td>
                </tr>
                <tr>
                    <td>Phone No: </td>
                    <td>
                        <label id="lblphoneno" class="label-info"></label>
                    </td>
                </tr>
                <tr>
                    <td>Email ID: </td>
                    <td>
                        <label id="lblemailid" class="label-info"></label>
                    </td>
                </tr>
                <tr>
                    <td>Password: </td>
                    <td>
                        <label id="lblpassword" class="label-info"></label>
                    </td>
                </tr>
                <tr>
                    <td>City: </td>
                    <td>
                        <label id="lblfkcityid" class="label-info"></label>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>


<script>
        $(document).ready(function () {
            $("#result").change(function () {

                var id = $(this).val();
                var resulturl = "@Url.Action("AjaxDropDownSearch","Task2")/" + id;

                if (id === "") {
                    alert("No record found.....");
                    return false;
                }


                $.getJSON(resulturl, null, function (data) {

                    $("#lblid").html(data.id);
                    $("#lblname").html(data.name);
                    $("#lbladdress").html(data.address);
                    $("#lblphoneno").html(data.phoneno);
                    $("#lblemailid").html(data.emailid);
                    $("#lblpassword").html(data.password);
                    $("#lblfkcityid").html(data.FKcityid);

                })
            });
        });

</script>